{% extends 'body.html' %}
{% load widget_tweaks %}

{% block contenido %}

<form method="post" action=".">
    <div class="card card-default">
        
        <div class="card-header">
            <h3 class="card-title">
                <i class="fas fa-search"></i>
                {{ titulo }}
            </h3>
        </div>

        <div class="card-body">
            {% csrf_token %}
            
            {% for field in form.visible_fields %}
                <div class="form-group mb-3">
                    
                    <label for="{{ field.id_for_label }}">
                        {{ field.label }}:
                    </label>

                    {{ field|add_class:'form-control'|attr:'autocomplete:off' }}
                    {% if field.errors %}
                        <div class="text-danger">
                            <button type="button" class="close" data-dismiss="alert">x</button>
                            {% for error in field.errors %}
                            {{ error }}
                            {% endfor %}
                        </div>
                    {% endif %}


                </div>
            {% endfor %}

        </div>

        <div class="card-footer mt-3">
            <button type="submit" class="btn btn-primary btn-sm">
                <i class="fas fa-plus"></i> Guardar registro
            </button>

            <a href="{{ listar_url }}" class="btn btn-secondary btn-sm">
                <i class="fas fa-arrow-left"></i> Devolver
            </a>
        </div>

    </div>
</form>

{% endblock %}


{% block js %}
<script>

{% if form.is_bound and form.errors %}
document.addEventListener('DOMContentLoaded', function () {
    Swal.fire({
        title: '¡Atención!',
        text: 'Por favor corrige los errores en el formulario',
        icon: 'warning',
        confirmButtonColor: '#3085d6',
        confirmButtonText: 'Entendido'
    });
});
{% endif %}

</script>
{% endblock %}
